--Crear el esquema
EXEC('CREATE SCHEMA GDD2020 AUTHORIZATION dbo');

--Crear tablas

CREATE TABLE [GDD2020].[CLIENTE](
	[CLIENTE_CODIGO] BIGINT IDENTITY(1,1) PRIMARY KEY,
	[CLIENTE_DNI] [decimal](18, 0),
	[CLIENTE_APELLIDO] [nvarchar](255),
	[CLIENTE_NOMBRE] [nvarchar](255),
	[CLIENTE_DIRECCION] [nvarchar](255) NULL,
	[CLIENTE_FECHA_NAC] [datetime2](3) NULL,
	[CLIENTE_MAIL] [nvarchar](255) NULL
	) ON [PRIMARY]

CREATE TABLE [GDD2020].[TIPOAUTO](
	[TIPO_AUTO_CODIGO] [decimal](18, 0) PRIMARY KEY,
	[TIPO_AUTO_DESC] [nvarchar](255) NULL
)

CREATE TABLE [GDD2020].[SUCURSAL](
	[SUCURSAL_CODIGO] BIGINT IDENTITY(1,1) PRIMARY KEY,
	[SUCURSAL_DIRECCION] [nvarchar](255) NULL,
	[SUCURSAL_MAIL] [nvarchar](255) NULL,
	[SUCURSAL_TELEFONO] [decimal](18, 0) NULL,
	[SUCURSAL_CIUDAD] [nvarchar](255) NULL
)

CREATE TABLE [GDD2020].[MODELO](
	[MODELO_CODIGO] [decimal](18, 0) NULL,
	[MODELO_NOMBRE] [nvarchar](255) NULL,
	[MODELO_POTENCIA] [decimal](18, 0) NULL
)

CREATE TABLE [GDD2020].[FABRICANTE](
	[FABRICANTE_CODIGO] [SUCURSAL_CODIGO] BIGINT IDENTITY(1,1) PRIMARY KEY,
	[FABRICANTE_NOMBRE] [nvarchar](255) NULL
)

-- EJEMPLO para FOREIGN KEYS 	
--CONSTRAINT FK_TIPO_BUTACA FOREIGN KEY (TIPO_BUTACA_CODIGO) REFERENCES [GDD2020].[TIPO_BUTACA](TIPO_BUTACA_CODIGO)


CREATE TABLE [GDD2020].[CAJA](
	[TIPO_CAJA_CODIGO] [decimal](18, 0) PRIMARY KEY,
	[TIPO_CAJA_DESC] [nvarchar](255) NULL,
	[AUTO_PARTE_CODIGO] [decimal](18, 0) NULL
	CONSTRAINT FK_AUTO_PARTE_CODIGO FOREIGN KEY (AUTO_PARTE_CODIGO) REFERENCES [GDD2020].[AUTOPARTE][AUTO_PARTE_CODIGO]
)

CREATE TABLE [GDD2020].[AUTOMOVIL](
	[AUTO_PATENTE] [nvarchar](50) NULL,
	[AUTO_NRO_CHASIS] [nvarchar](50) NULL,
	[AUTO_NRO_MOTOR] [nvarchar](50) NULL,
	[AUTO_CANT_KMS] [decimal](18, 0) NULL,
	[AUTO_FECHA_ALTA] [datetime2](3) NULL,
	[TIPO_TRANSMISION_CODIGO] [decimal](18, 0) NULL, --FK
	[MODELO_CODIGO] [decimal](18, 0) NULL, --fK
	[FABRICANTE_CODIGO] [SUCURSAL_CODIGO] BIGINT, --fk
	[TIPO_AUTO_CODIGO] [decimal](18, 0) --fk
)

CREATE TABLE [GDD2020].[MOTOR](
	[TIPO_MOTOR_CODIGO] [decimal](18, 0) PRIMARY KEY,
	[AUTO_PARTE_CODIGO] -- TODO FK
)

CREATE TABLE [GDD2020].[TRANSMISION](
	[TIPO_TRANSMISION_CODIGO] [decimal](18, 0) PRIMARY KEY,
	[TIPO_TRANSMISION_DESC] [nvarchar](255) NULL,
	[AUTO_PARTE_CODIGO] --TODO FK
)





--Migrar datos

--Crear un usuario para la migraci√≥n

--Crear rol

--Asigno rol al usuario

--INSERTAR en las tablas ( INSERT SELECT)


